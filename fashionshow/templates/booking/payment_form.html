{% block content %}
<div style="max-width: 400px; margin: 0 auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background: #f9f9f9;">
    <h2 style="text-align: center; color: #333;">Введите данные карты для оплаты</h2>

    <form method="post">
        {% csrf_token %}
        <div style="margin-bottom: 20px;">
            <label for="card_number" style="font-size: 16px;">Номер карты</label>
            <input type="text" name="card_number" id="card_number" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px;" maxlength="19" oninput="formatCardNumber(this)" placeholder="XXXX XXXX XXXX XXXX">
        </div>

        <div style="margin-bottom: 20px;">
            <label for="card_expiry" style="font-size: 16px;">Срок действия</label>
            <input type="text" name="card_expiry" id="card_expiry" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px;" maxlength="5" oninput="formatExpiryDate(this)" placeholder="MM/YY">
        </div>

        <button type="submit" style="width: 100%; padding: 10px; background-color: #28a745; color: white; border: none; border-radius: 5px; font-size: 16px;">
            Подтвердить оплату
        </button>
    </form>
</div>

<script>
    function formatCardNumber(input) {
        // Удаляем все символы, кроме цифр
        let value = input.value.replace(/\D/g, '');

        // Форматируем как XXXX XXXX XXXX XXXX
        let formattedValue = '';
        for (let i = 0; i < value.length; i++) {
            if (i > 0 && i % 4 === 0) {
                formattedValue += ' ';
            }
            formattedValue += value[i];
        }

        // Ограничиваем длину до 16 цифр (19 символов, включая пробелы)
        input.value = formattedValue.substring(0, 19);
    }

    function formatExpiryDate(input) {
        // Удаляем все символы, кроме цифр
        let value = input.value.replace(/\D/g, '');

        // Форматируем как MM/YY
        if (value.length > 2) {
            value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }

        // Ограничиваем длину до 5 символов (например, 05/26)
        input.value = value.substring(0, 5);
    }
</script>
{% endblock %}
